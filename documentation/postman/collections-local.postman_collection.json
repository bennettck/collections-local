{
  "info": {
    "_postman_id": "collections-local-api",
    "name": "Collections Local API",
    "description": "API collection for the Collections App Local - a minimal local version that analyzes and categorizes screenshot images using AI.\n\n## Overview\n\nThis API allows you to:\n- Upload and manage image items\n- Trigger AI-powered analysis on images\n- Retrieve categorization, summaries, and extracted text\n- Access full LLM analysis response via raw_response field\n- Search collection using LangChain-compatible retrievers for evaluation and integration\n- Generate AI-powered answers to questions about your collection\n\n## Search Capabilities\n\n- **LangChain BM25** (`bm25-lc`): LangChain-compatible BM25 retriever wrapping native FTS5 search\n- **LangChain Vector** (`vector-lc`): LangChain-compatible vector retriever wrapping native sqlite-vec search\n- **Hybrid Search** (`hybrid-lc`): LangChain EnsembleRetriever combining BM25 + Vector with Reciprocal Rank Fusion (RRF) - **recommended for production**\n- All search types support category filtering, Q&A generation, and answer citations\n\n**Note:** All search types conform to LangChain's BaseRetriever interface, making them compatible with LangChain evaluation tools. The `hybrid-lc` type combines both keyword and semantic search for optimal results."\n\n## Database Routing\n\nThe API supports two databases via host-based routing:\n\n- **Production Database** (default): Use `{{base_url}}` (`http://localhost:8000`)\n- **Golden Database** (evaluation subset): Use `{{golden_base_url}}` (`http://golden.localhost:8000`) or append `?_db=golden` to any endpoint\n\nAll responses include an `X-Database-Context` header indicating which database was used.\n\nFor complete details, see `documentation/database-routing.md`.\n\n## Authentication\n\nNo authentication required for local development.\n\n## Base URL\n\n`http://localhost:8000`",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Health",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/health",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "health"
              ]
            },
            "description": "## Health Check\n\nVerify that the API server is running and healthy. Also shows which database is active and statistics for both databases.\n\n### Response\n\n**Status Code:** `200 OK`\n\n```json\n{\n  \"status\": \"healthy\",\n  \"timestamp\": \"2025-11-30T12:00:00.000000\",\n  \"active_database\": \"production\",\n  \"active_db_path\": \"./data/collections.db\",\n  \"database_stats\": {\n    \"production\": {\n      \"items\": 84\n    },\n    \"golden\": {\n      \"items\": 55\n    }\n  }\n}\n```\n\n### Response Fields\n\n| Field | Type | Description |\n|-------|------|-------------|\n| `status` | string | Health status, always \"healthy\" if responding |\n| `timestamp` | string | ISO 8601 timestamp of the response |\n| `active_database` | string | Which database this request is using (\"production\" or \"golden\") |\n| `active_db_path` | string | File path of the active database |\n| `database_stats` | object | Item counts for both databases |\n\n### Response Headers\n\nAll responses include `X-Database-Context: production` or `X-Database-Context: golden`"
          },
          "response": []
        }
      ],
      "description": "Health check endpoints for monitoring API availability."
    },
    {
      "name": "Database Routing",
      "item": [
        {
          "name": "Health Check - Production DB",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/health",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "health"
              ]
            },
            "description": "Health check using the production database (default).\n\nExpected response: `\"active_database\": \"production\"`"
          },
          "response": []
        },
        {
          "name": "Health Check - Golden DB (Subdomain)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{golden_base_url}}/health",
              "host": [
                "{{golden_base_url}}"
              ],
              "path": [
                "health"
              ]
            },
            "description": "Health check using the golden database via subdomain routing.\n\nRequires adding `127.0.0.1 golden.localhost` to /etc/hosts.\n\nExpected response: `\"active_database\": \"golden\"`"
          },
          "response": []
        },
        {
          "name": "Health Check - Golden DB (Query Param)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/health?_db=golden",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "health"
              ],
              "query": [
                {
                  "key": "_db",
                  "value": "golden",
                  "description": "Route to golden database"
                }
              ]
            },
            "description": "Health check using the golden database via query parameter.\n\nNo /etc/hosts configuration required.\n\nExpected response: `\"active_database\": \"golden\"`"
          },
          "response": []
        },
        {
          "name": "List Items - Golden DB",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/items?_db=golden&limit=10",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "items"
              ],
              "query": [
                {
                  "key": "_db",
                  "value": "golden",
                  "description": "Route to golden database"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Number of items to return"
                }
              ]
            },
            "description": "List items from the golden database (55 items total).\n\nUses query parameter routing for easy testing."
          },
          "response": []
        }
      ],
      "description": "Examples of accessing the production and golden databases using different routing methods."
    },
    {
      "name": "Items",
      "item": [
        {
          "name": "Upload Item",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.environment.set('item_id', jsonData.id);",
                  "    console.log('Saved item_id:', jsonData.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "",
                  "description": "Image file to upload (PNG, JPEG, WebP, or GIF)"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/items",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "items"
              ]
            },
            "description": "## Upload Item\n\nUpload an image file to create a new item in the collection.\n\n### Request\n\n**Content-Type:** `multipart/form-data`\n\n| Field | Type | Required | Description |\n|-------|------|----------|-------------|\n| `file` | file | Yes | Image file (PNG, JPEG, WebP, or GIF) |\n\n### Supported File Types\n\n- `image/png`\n- `image/jpeg`\n- `image/webp`\n- `image/gif`\n\n### Response\n\n**Status Code:** `200 OK`\n\n```json\n{\n  \"id\": \"uuid-string\",\n  \"filename\": \"uuid-string.png\",\n  \"original_filename\": \"screenshot.png\",\n  \"file_size\": 12345,\n  \"mime_type\": \"image/png\",\n  \"created_at\": \"2025-11-30T12:00:00.000000\",\n  \"updated_at\": \"2025-11-30T12:00:00.000000\",\n  \"latest_analysis\": null\n}\n```\n\n### Response Fields\n\n| Field | Type | Description |\n|-------|------|-------------|\n| `id` | string | Unique identifier (UUID) for the item |\n| `filename` | string | Stored filename (UUID-based) |\n| `original_filename` | string | Original uploaded filename |\n| `file_size` | integer | File size in bytes |\n| `mime_type` | string | MIME type of the file |\n| `created_at` | string | ISO 8601 creation timestamp |\n| `updated_at` | string | ISO 8601 last update timestamp |\n| `latest_analysis` | object/null | Latest analysis result (null if not analyzed) |\n\n### Error Responses\n\n**Status Code:** `400 Bad Request`\n\n```json\n{\n  \"detail\": \"Invalid file type. Allowed types: image/png, image/jpeg, image/webp, image/gif\"\n}\n```"
          },
          "response": []
        },
        {
          "name": "List Items",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/items?limit=50&offset=0",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "items"
              ],
              "query": [
                {
                  "key": "category",
                  "value": "Travel",
                  "description": "Filter by category (dynamic, determined by LLM analysis)",
                  "disabled": true
                },
                {
                  "key": "limit",
                  "value": "50",
                  "description": "Maximum number of items to return (max 100)"
                },
                {
                  "key": "offset",
                  "value": "0",
                  "description": "Number of items to skip for pagination"
                }
              ]
            },
            "description": "## List Items\n\nRetrieve a paginated list of all items in the collection.\n\n### Query Parameters\n\n| Parameter | Type | Default | Description |\n|-----------|------|---------|-------------|\n| `category` | string | - | Filter by analysis category |\n| `limit` | integer | 50 | Maximum items to return (max 100) |\n| `offset` | integer | 0 | Items to skip for pagination |\n\n### Response\n\n**Status Code:** `200 OK`\n\n```json\n{\n  \"items\": [\n    {\n      \"id\": \"uuid-string\",\n      \"filename\": \"uuid-string.png\",\n      \"original_filename\": \"screenshot.png\",\n      \"file_size\": 12345,\n      \"mime_type\": \"image/png\",\n      \"created_at\": \"2025-11-30T12:00:00.000000\",\n      \"updated_at\": \"2025-11-30T12:00:00.000000\",\n      \"latest_analysis\": {\n        \"id\": \"analysis-uuid\",\n        \"item_id\": \"uuid-string\",\n        \"version\": 1,\n        \"category\": \"Travel\",\n        \"summary\": \"A TikTok screenshot about Togoshi Ginza...\",\n        \"raw_response\": { ... },\n        \"provider_used\": \"anthropic\",\n        \"model_used\": \"claude-sonnet-4-5\",\n        \"trace_id\": null,\n        \"created_at\": \"2025-11-30T12:05:00.000000\"\n      }\n    }\n  ],\n  \"total\": 1\n}\n```\n\n### Response Fields\n\n| Field | Type | Description |\n|-------|------|-------------|\n| `items` | array | List of item objects |\n| `total` | integer | Total count of items matching the filter |"
          },
          "response": []
        },
        {
          "name": "Get Item",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/items/{{item_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "items",
                "{{item_id}}"
              ]
            },
            "description": "## Get Item\n\nRetrieve a single item by its ID, including the latest analysis with full raw_response if available.\n\n### Path Parameters\n\n| Parameter | Type | Description |\n|-----------|------|-------------|\n| `item_id` | string | UUID of the item |\n\n### Response\n\n**Status Code:** `200 OK`\n\n```json\n{\n  \"id\": \"uuid-string\",\n  \"filename\": \"uuid-string.png\",\n  \"original_filename\": \"screenshot.png\",\n  \"file_size\": 12345,\n  \"mime_type\": \"image/png\",\n  \"created_at\": \"2025-11-30T12:00:00.000000\",\n  \"updated_at\": \"2025-11-30T12:00:00.000000\",\n  \"latest_analysis\": {\n    \"id\": \"analysis-uuid\",\n    \"item_id\": \"uuid-string\",\n    \"version\": 1,\n    \"category\": \"Travel\",\n    \"summary\": \"A TikTok screenshot about Togoshi Ginza...\",\n    \"raw_response\": {\n      \"category\": \"Travel\",\n      \"subcategories\": [\"Japan\", \"Shopping\", \"Local Culture\"],\n      \"headline\": \"Togoshi Ginza: Tokyo's authentic 1.3km local shopping street\",\n      \"summary\": \"A TikTok screenshot about Togoshi Ginza...\",\n      \"media_metadata\": {\n        \"original_poster\": \"recommend_ndre\",\n        \"tagged_accounts\": [],\n        \"location_tags\": [\"Tokyo\"],\n        \"audio_source\": \"Apple Music - bloodline - Ariana Grande\",\n        \"hashtags\": [\"#japan\"]\n      },\n      \"image_details\": {\n        \"extracted_text\": [\"TOGOSHI GINZA\", \"With over 400 shops...\"],\n        \"objects\": [\"Japanese street scene\", \"Traditional shop signs\"],\n        \"themes\": [\"Authentic local experiences\", \"Japanese culture\"],\n        \"emotions\": [\"Curiosity\", \"Cultural appreciation\"],\n        \"vibes\": [\"Authentic\", \"Local\", \"Cultural immersion\"],\n        \"likely_source\": \"TikTok\",\n        \"key_interest\": \"Hidden local shopping district\",\n        \"visual_hierarchy\": [\"TOGOSHI GINZA title text\", \"Descriptive paragraph\"]\n      }\n    },\n    \"provider_used\": \"anthropic\",\n    \"model_used\": \"claude-sonnet-4-5\",\n    \"trace_id\": null,\n    \"created_at\": \"2025-11-30T12:05:00.000000\"\n  }\n}\n```\n\n### Error Responses\n\n**Status Code:** `404 Not Found`\n\n```json\n{\n  \"detail\": \"Item not found\"\n}\n```"
          },
          "response": []
        },
        {
          "name": "Delete Item",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/items/{{item_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "items",
                "{{item_id}}"
              ]
            },
            "description": "## Delete Item\n\nDelete an item and all associated data including:\n- The stored image file\n- All analysis records\n\n### Path Parameters\n\n| Parameter | Type | Description |\n|-----------|------|-------------|\n| `item_id` | string | UUID of the item to delete |\n\n### Response\n\n**Status Code:** `200 OK`\n\n```json\n{\n  \"status\": \"deleted\",\n  \"id\": \"uuid-string\"\n}\n```\n\n### Error Responses\n\n**Status Code:** `404 Not Found`\n\n```json\n{\n  \"detail\": \"Item not found\"\n}\n```"
          },
          "response": []
        }
      ],
      "description": "Endpoints for managing collection items (images)."
    },
    {
      "name": "Analysis",
      "item": [
        {
          "name": "Analyze Item",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.environment.set('analysis_id', jsonData.id);",
                  "    console.log('Saved analysis_id:', jsonData.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"force_reanalyze\": false,\n  \"provider\": \"anthropic\",\n  \"model\": \"claude-sonnet-4-5\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/items/{{item_id}}/analyze",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "items",
                "{{item_id}}",
                "analyze"
              ]
            },
            "description": "## Analyze Item\n\nTrigger AI analysis on an uploaded image. The analysis uses AI vision capabilities (Anthropic Claude or OpenAI GPT-4o) to:\n- Categorize the image\n- Generate a summary and headline\n- Extract text content\n- Identify media metadata (poster, hashtags, etc.)\n- Analyze image details (objects, themes, emotions, vibes)\n\n### Path Parameters\n\n| Parameter | Type | Description |\n|-----------|------|-------------|\n| `item_id` | string | UUID of the item to analyze |\n\n### Request Body\n\n```json\n{\n  \"force_reanalyze\": false,\n  \"provider\": \"anthropic\",\n  \"model\": \"claude-sonnet-4-5\"\n}\n```\n\n| Field | Type | Default | Description |\n|-------|------|---------|-------------|\n| `force_reanalyze` | boolean | `false` | If true, creates new analysis even if one exists |\n| `provider` | string | `\"anthropic\"` | AI provider: `\"anthropic\"` or `\"openai\"` |\n| `model` | string | *(provider default)* | Model to use. Defaults to `\"claude-sonnet-4-5\"` for Anthropic or `\"gpt-4o\"` for OpenAI |\n\n### Provider Defaults\n\n| Provider | Default Model |\n|----------|---------------|\n| `anthropic` | `claude-sonnet-4-5` |\n| `openai` | `gpt-4o` |\n\n### Response\n\n**Status Code:** `200 OK`\n\n```json\n{\n  \"id\": \"analysis-uuid\",\n  \"item_id\": \"uuid-string\",\n  \"version\": 1,\n  \"category\": \"Travel\",\n  \"summary\": \"A TikTok screenshot about Togoshi Ginza, a 1.3km local shopping street in Tokyo...\",\n  \"raw_response\": {\n    \"category\": \"Travel\",\n    \"subcategories\": [\"Japan\", \"Shopping\", \"Local Culture\"],\n    \"headline\": \"Togoshi Ginza: Tokyo's authentic 1.3km local shopping street\",\n    \"summary\": \"A TikTok screenshot about Togoshi Ginza...\",\n    \"media_metadata\": {\n      \"original_poster\": \"recommend_ndre\",\n      \"tagged_accounts\": [],\n      \"location_tags\": [\"Tokyo\"],\n      \"audio_source\": \"Apple Music - bloodline - Ariana Grande\",\n      \"hashtags\": [\"#japan\"]\n    },\n    \"image_details\": {\n      \"extracted_text\": [\"TOGOSHI GINZA\", \"With over 400 shops...\"],\n      \"objects\": [\"Japanese street scene\", \"Traditional shop signs\"],\n      \"themes\": [\"Authentic local experiences\", \"Japanese culture\"],\n      \"emotions\": [\"Curiosity\", \"Cultural appreciation\"],\n      \"vibes\": [\"Authentic\", \"Local\", \"Cultural immersion\"],\n      \"likely_source\": \"TikTok\",\n      \"key_interest\": \"Hidden local shopping district\",\n      \"visual_hierarchy\": [\"TOGOSHI GINZA title text\", \"Descriptive paragraph\"]\n    }\n  },\n  \"provider_used\": \"anthropic\",\n  \"model_used\": \"claude-sonnet-4-5\",\n  \"trace_id\": null,\n  \"created_at\": \"2025-11-30T12:05:00.000000\"\n}\n```\n\n### Response Fields\n\n| Field | Type | Description |\n|-------|------|-------------|\n| `id` | string | Unique identifier for this analysis |\n| `item_id` | string | ID of the analyzed item |\n| `version` | integer | Analysis version number (increments with each reanalysis) |\n| `category` | string/null | Primary category (extracted from raw_response) |\n| `summary` | string/null | Summary (extracted from raw_response) |\n| `raw_response` | object | Full LLM analysis response (see raw_response Schema) |\n| `provider_used` | string | AI provider used (`\"anthropic\"` or `\"openai\"`) |\n| `model_used` | string | AI model used for analysis |\n| `trace_id` | string/null | LangSmith trace ID for debugging and observability |\n| `created_at` | string | ISO 8601 timestamp |\n\n### raw_response Schema\n\n| Field | Type | Description |\n|-------|------|-------------|\n| `category` | string | Primary category |\n| `subcategories` | array | 2-3 specific subcategories |\n| `headline` | string | 140 character headline |\n| `summary` | string | 2-3 sentence summary |\n| `media_metadata` | object | Social media metadata (poster, tags, location, audio, hashtags) |\n| `image_details` | object | Detailed analysis (text, objects, themes, emotions, vibes, source, etc.) |\n\n### Error Responses\n\n**Status Code:** `404 Not Found`\n\n```json\n{\n  \"detail\": \"Item not found\"\n}\n```\n\n**Status Code:** `500 Internal Server Error`\n\n```json\n{\n  \"detail\": \"Analysis failed: <error message>\"\n}\n```\n\n### Prerequisites\n\nBefore using this endpoint, ensure:\n1. LangSmith credentials are configured in `.env` (`LANGCHAIN_API_KEY`, `LANGCHAIN_TRACING_V2=true`)\n2. Prompt `collections-app-initial` exists in LangSmith Hub (or fallback prompt is used automatically)\n3. Provider API keys configured: `ANTHROPIC_API_KEY` and/or `OPENAI_API_KEY`\n\n### LangSmith Integration\n\nAll analysis operations are automatically traced in LangSmith. Use the `trace_id` from the response to view the full trace at https://smith.langchain.com/projects/collections-local"
          },
          "response": []
        },
        {
          "name": "Get Item Analyses",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/items/{{item_id}}/analyses",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "items",
                "{{item_id}}",
                "analyses"
              ]
            },
            "description": "## Get Item Analyses\n\nRetrieve all analysis versions for a specific item, ordered by version (newest first).\n\nThis is useful for:\n- Viewing analysis history\n- Comparing results across different models and providers\n- Tracking how categorization has changed\n\n### Path Parameters\n\n| Parameter | Type | Description |\n|-----------|------|-------------|\n| `item_id` | string | UUID of the item |\n\n### Response\n\n**Status Code:** `200 OK`\n\n```json\n[\n  {\n    \"id\": \"analysis-uuid-2\",\n    \"item_id\": \"uuid-string\",\n    \"version\": 2,\n    \"category\": \"Travel\",\n    \"summary\": \"Updated analysis...\",\n    \"raw_response\": {\n      \"category\": \"Travel\",\n      \"subcategories\": [\"Japan\", \"Shopping\"],\n      \"headline\": \"...\",\n      \"summary\": \"Updated analysis...\",\n      \"media_metadata\": { ... },\n      \"image_details\": { ... }\n    },\n    \"provider_used\": \"openai\",\n    \"model_used\": \"gpt-4o\",\n    \"trace_id\": null,\n    \"created_at\": \"2025-11-30T14:00:00.000000\"\n  },\n  {\n    \"id\": \"analysis-uuid-1\",\n    \"item_id\": \"uuid-string\",\n    \"version\": 1,\n    \"category\": \"Travel\",\n    \"summary\": \"Original analysis...\",\n    \"raw_response\": {\n      \"category\": \"Travel\",\n      \"subcategories\": [\"Japan\", \"Local Culture\"],\n      \"headline\": \"...\",\n      \"summary\": \"Original analysis...\",\n      \"media_metadata\": { ... },\n      \"image_details\": { ... }\n    },\n    \"provider_used\": \"anthropic\",\n    \"model_used\": \"claude-sonnet-4-5\",\n    \"trace_id\": null,\n    \"created_at\": \"2025-11-30T12:05:00.000000\"\n  }\n]\n```\n\n### Error Responses\n\n**Status Code:** `404 Not Found`\n\n```json\n{\n  \"detail\": \"Item not found\"\n}\n```"
          },
          "response": []
        },
        {
          "name": "Get Analysis",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/analyses/{{analysis_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "analyses",
                "{{analysis_id}}"
              ]
            },
            "description": "## Get Analysis\n\nRetrieve a specific analysis by its ID with full raw_response.\n\n### Path Parameters\n\n| Parameter | Type | Description |\n|-----------|------|-------------|\n| `analysis_id` | string | UUID of the analysis |\n\n### Response\n\n**Status Code:** `200 OK`\n\n```json\n{\n  \"id\": \"analysis-uuid\",\n  \"item_id\": \"uuid-string\",\n  \"version\": 1,\n  \"category\": \"Travel\",\n  \"summary\": \"A TikTok screenshot about Togoshi Ginza...\",\n  \"raw_response\": {\n    \"category\": \"Travel\",\n    \"subcategories\": [\"Japan\", \"Shopping\", \"Local Culture\"],\n    \"headline\": \"Togoshi Ginza: Tokyo's authentic 1.3km local shopping street\",\n    \"summary\": \"A TikTok screenshot about Togoshi Ginza...\",\n    \"media_metadata\": {\n      \"original_poster\": \"recommend_ndre\",\n      \"tagged_accounts\": [],\n      \"location_tags\": [\"Tokyo\"],\n      \"audio_source\": \"Apple Music - bloodline - Ariana Grande\",\n      \"hashtags\": [\"#japan\"]\n    },\n    \"image_details\": {\n      \"extracted_text\": [\"TOGOSHI GINZA\", \"With over 400 shops...\"],\n      \"objects\": [\"Japanese street scene\", \"Traditional shop signs\"],\n      \"themes\": [\"Authentic local experiences\", \"Japanese culture\"],\n      \"emotions\": [\"Curiosity\", \"Cultural appreciation\"],\n      \"vibes\": [\"Authentic\", \"Local\", \"Cultural immersion\"],\n      \"likely_source\": \"TikTok\",\n      \"key_interest\": \"Hidden local shopping district\",\n      \"visual_hierarchy\": [\"TOGOSHI GINZA title text\", \"Descriptive paragraph\"]\n    }\n  },\n  \"provider_used\": \"anthropic\",\n  \"model_used\": \"claude-sonnet-4-5\",\n  \"trace_id\": null,\n  \"created_at\": \"2025-11-30T12:05:00.000000\"\n}\n```\n\n### Error Responses\n\n**Status Code:** `404 Not Found`\n\n```json\n{\n  \"detail\": \"Analysis not found\"\n}\n```"
          },
          "response": []
        }
      ],
      "description": "Endpoints for AI-powered image analysis. Analysis responses include a `raw_response` field containing the full LLM analysis output."
    },
    {
      "name": "Search",
      "item": [
        {
          "name": "Search Collection",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"restaurants in Tokyo\",\n  \"search_type\": \"bm25-lc\",\n  \"top_k\": 5,\n  \"category_filter\": null,\n  \"min_relevance_score\": -1.0,\n  \"min_similarity_score\": 0.0,\n  \"include_answer\": true,\n  \"answer_model\": \"claude-sonnet-4-5\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/search",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "search"
              ]
            },
            "description": "## Search Collection\n\nNatural language search and Q&A over the collection. Supports three LangChain-compatible search types:\n\n- **`bm25-lc`**: LangChain BM25 retriever (wraps native BM25)\n- **`vector-lc`**: LangChain vector retriever (wraps native vector)\n- **`hybrid-lc`**: LangChain hybrid retriever (combines BM25 + Vector with RRF) - **recommended**\n\n### Request Body\n\n```json\n{\n  \"query\": \"restaurants in Tokyo\",\n  \"search_type\": \"bm25-lc\",\n  \"top_k\": 5,\n  \"category_filter\": null,\n  \"min_relevance_score\": -1.0,\n  \"min_similarity_score\": 0.0,\n  \"include_answer\": true,\n  \"answer_model\": \"claude-sonnet-4-5\"\n}\n```\n\n### Parameters\n\n| Field | Type | Default | Description |\n|-------|------|---------|-------------|\n| `query` | string | *required* | Search query or question |\n| `search_type` | string | `\"bm25-lc\"` | Search method: `\"bm25-lc\"`, `\"vector-lc\"`, or `\"hybrid-lc\"` |\n| `top_k` | integer | `10` | Number of results to return (1-50) |\n| `category_filter` | string/null | `null` | Filter by category |\n| `min_relevance_score` | float | `-1.0` | **BM25-LC only**: Minimum BM25 score threshold |\n| `min_similarity_score` | float | `0.0` | **Vector-LC only**: Minimum similarity score (0-1) |\n| `include_answer` | boolean | `true` | Generate AI answer to query |\n| `answer_model` | string | `null` | Model for answer generation (defaults to `claude-sonnet-4-5`) |\n\n### Search Type Values\n\n| Value | Description | Use Case |\n|-------|-------------|----------|\n| `bm25-lc` | LangChain BM25 wrapper | Evaluation with LangChain tools |\n| `vector-lc` | LangChain vector wrapper | Evaluation with LangChain tools |\n| `hybrid-lc` | LangChain RRF ensemble (BM25+Vector) | Best overall results - recommended |\n\n**Note:** All search types conform to LangChain's BaseRetriever interface. The `hybrid-lc` type combines both keyword and semantic search for optimal results.\n\n### Response\n\n**Status Code:** `200 OK`\n\n```json\n{\n  \"query\": \"restaurants in Tokyo\",\n  \"search_type\": \"bm25-lc\",\n  \"results\": [\n    {\n      \"item_id\": \"uuid-string\",\n      \"rank\": 1,\n      \"score\": -2.5,\n      \"score_type\": \"bm25\",\n      \"category\": \"Food\",\n      \"headline\": \"Tofuya Ukai dining spot beneath Tokyo Tower\",\n      \"summary\": \"Beautiful restaurant beneath Tokyo Tower...\",\n      \"image_url\": \"/images/uuid.jpg\",\n      \"metadata\": { ... }\n    }\n  ],\n  \"total_results\": 3,\n  \"answer\": \"Based on your collection, here are some restaurants in Tokyo...\",\n  \"answer_confidence\": 0.85,\n  \"citations\": [\"1\", \"2\"],\n  \"retrieval_time_ms\": 15.2,\n  \"answer_time_ms\": 823.4\n}\n```\n\n### Score Interpretation\n\n| Score Type | Score Range | Interpretation |\n|------------|-------------|----------------|\n| `bm25` | Negative values (e.g., -2.5) | More negative = better match |\n| `similarity` | 0.0 to 1.0 | Higher = more similar |\n| `hybrid_rrf` | 0.0 to 1.0 | Reciprocal Rank Fusion score - higher = better combined ranking |"
          },
          "response": []
        },
        {
          "name": "Vector-LC Search - Basic",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"Japanese beauty products and perfume\",\n  \"search_type\": \"vector-lc\",\n  \"top_k\": 5,\n  \"include_answer\": true,\n  \"answer_model\": \"claude-sonnet-4-5\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/search",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "search"
              ]
            },
            "description": "## Vector-LC Search - Basic\n\nSemantic similarity search using VoyageAI embeddings. Returns results based on semantic meaning rather than exact keyword matches.\n\n### Request Body\n\n```json\n{\n  \"query\": \"Japanese beauty products and perfume\",\n  \"search_type\": \"vector-lc\",\n  \"top_k\": 5,\n  \"include_answer\": true,\n  \"answer_model\": \"claude-sonnet-4-5\"\n}\n```\n\n### Response\n\n**Status Code:** `200 OK`\n\n```json\n{\n  \"query\": \"Japanese beauty products and perfume\",\n  \"results\": [\n    {\n      \"item_id\": \"uuid-string\",\n      \"rank\": 1,\n      \"score\": 0.87,\n      \"score_type\": \"similarity\",\n      \"category\": \"Beauty\",\n      \"headline\": \"...\",\n      \"summary\": \"...\",\n      \"image_url\": \"/images/uuid.jpg\",\n      \"metadata\": { ... }\n    }\n  ],\n  \"total_results\": 5,\n  \"answer\": \"Based on your collection...\",\n  \"answer_confidence\": \"high\",\n  \"citations\": [1, 2, 3],\n  \"retrieval_time_ms\": 25.3,\n  \"answer_time_ms\": 901.2\n}\n```\n\n### Benefits of Vector-LC Search\n\n- Finds semantically similar items even without exact keyword matches\n- Better for conceptual queries (e.g., \"cozy cafes\" matches \"warm coffee shops\")\n- Handles synonyms and related concepts naturally\n- Returns similarity scores from 0.0 (dissimilar) to 1.0 (identical)"
          },
          "response": []
        },
        {
          "name": "Vector-LC Search - with Similarity Threshold",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"traditional Japanese architecture\",\n  \"search_type\": \"vector-lc\",\n  \"top_k\": 10,\n  \"min_similarity_score\": 0.7,\n  \"include_answer\": false\n}"
            },
            "url": {
              "raw": "{{base_url}}/search",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "search"
              ]
            },
            "description": "## Vector-LC Search - with Similarity Threshold\n\nFilter vector search results by minimum similarity score to return only highly relevant items.\n\n### Request Body\n\n```json\n{\n  \"query\": \"traditional Japanese architecture\",\n  \"search_type\": \"vector-lc\",\n  \"top_k\": 10,\n  \"min_similarity_score\": 0.7,\n  \"include_answer\": false\n}\n```\n\n| Field | Type | Description |\n|-------|------|-------------|\n| `min_similarity_score` | float | Only return items with similarity >= this threshold (0.0-1.0) |\n\n### Recommended Thresholds\n\n- **0.9+**: Nearly identical content\n- **0.7-0.9**: Highly relevant\n- **0.5-0.7**: Moderately relevant\n- **<0.5**: Loosely related\n\n### Response\n\nReturns only items with similarity score >= 0.7. If fewer than `top_k` items meet the threshold, fewer results are returned."
          },
          "response": []
        },
        {
          "name": "Vector-LC Search - with Category Filter",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"delicious food and dining experiences\",\n  \"search_type\": \"vector-lc\",\n  \"top_k\": 5,\n  \"category_filter\": \"Food\",\n  \"include_answer\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/search",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "search"
              ]
            },
            "description": "## Vector-LC Search - with Category Filter\n\nCombine semantic search with category filtering to find relevant items within a specific category.\n\n### Request Body\n\n```json\n{\n  \"query\": \"delicious food and dining experiences\",\n  \"search_type\": \"vector-lc\",\n  \"top_k\": 5,\n  \"category_filter\": \"Food\",\n  \"include_answer\": true\n}\n```\n\n| Field | Type | Description |\n|-------|------|-------------|\n| `category_filter` | string | Only search within this category |\n\n### Use Cases\n\n- Search for \"relaxing experience\" within \"Travel\" category\n- Find \"affordable options\" in \"Shopping\" category\n- Discover \"family-friendly\" items in \"Entertainment\" category\n\n### Response\n\nReturns only items in the specified category, ranked by semantic similarity to the query."
          },
          "response": []
        },
        {
          "name": "BM25-LC Search - Basic",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"Tokyo restaurants\",\n  \"search_type\": \"bm25-lc\",\n  \"top_k\": 5,\n  \"include_answer\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/search",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "search"
              ]
            },
            "description": "## BM25-LC Search - Basic\n\nLangChain-compatible BM25 retriever that wraps the native SQLite FTS5 search. Conforms to LangChain's BaseRetriever interface for evaluation and integration with LangChain tools.\n\n### Request Body\n\n```json\n{\n  \"query\": \"Tokyo restaurants\",\n  \"search_type\": \"bm25-lc\",\n  \"top_k\": 5,\n  \"include_answer\": true\n}\n```\n\n### Supported Parameters\n\n| Parameter | Type | Description |\n|-----------|------|-------------|\n| `search_type` | string | Must be `\"bm25-lc\"` |\n| `top_k` | integer | Number of results (1-50) |\n| `category_filter` | string | Filter by category |\n| `min_relevance_score` | float | BM25 score threshold |\n| `include_answer` | boolean | Generate AI answer |\n| `answer_model` | string | Model for answers |\n\n### Benefits\n\n- Compatible with LangChain evaluation frameworks\n- Same performance as native BM25 search\n- Returns LangChain Document objects internally\n- Supports all BM25 parameters (top_k, category_filter, min_relevance_score)"
          },
          "response": []
        },
        {
          "name": "Vector-LC Search - Advanced",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"Japanese beauty products and perfume\",\n  \"search_type\": \"vector-lc\",\n  \"top_k\": 5,\n  \"min_similarity_score\": 0.6,\n  \"include_answer\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/search",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "search"
              ]
            },
            "description": "## Vector-LC Search - Advanced\n\nLangChain-compatible vector retriever that wraps the native sqlite-vec search. Conforms to LangChain's BaseRetriever interface for evaluation and integration with LangChain tools.\n\n### Request Body\n\n```json\n{\n  \"query\": \"Japanese beauty products and perfume\",\n  \"search_type\": \"vector-lc\",\n  \"top_k\": 5,\n  \"min_similarity_score\": 0.6,\n  \"include_answer\": true\n}\n```\n\n### Supported Parameters\n\n| Parameter | Type | Description |\n|-----------|------|-------------|  \n| `search_type` | string | Must be `\"vector-lc\"` |\n| `top_k` | integer | Number of results (1-50) |\n| `category_filter` | string | Filter by category |\n| `min_similarity_score` | float | Similarity threshold (0-1) |\n| `include_answer` | boolean | Generate AI answer |\n| `answer_model` | string | Model for answers |\n\n### Benefits\n\n- Compatible with LangChain evaluation frameworks\n- Same semantic search quality as native vector search\n- Returns LangChain Document objects internally\n- Supports all vector search parameters (top_k, category_filter, min_similarity_score)\n- Uses VoyageAI embeddings (voyage-3.5-lite, 1024 dimensions)"
          },
          "response": []
        },
        {
          "name": "Hybrid-LC Search (Recommended)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"authentic local food experiences\",\n  \"search_type\": \"hybrid-lc\",\n  \"top_k\": 10,\n  \"include_answer\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/search",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "search"
              ]
            },
            "description": "## Hybrid-LC Search with RRF (Recommended)\n\nLangChain EnsembleRetriever combining BM25 keyword search and Vector semantic search using Reciprocal Rank Fusion (RRF). Provides the best overall retrieval performance across different query types.\n\n### Request Body\n\n```json\n{\n  \"query\": \"authentic local food experiences\",\n  \"search_type\": \"hybrid-lc\",\n  \"top_k\": 10,\n  \"include_answer\": true\n}\n```\n\n### Configuration\n\n- **Algorithm**: RRF Ensemble (BM25 + Vector)\n- **BM25 Weight**: 0.3 (30%)\n- **Vector Weight**: 0.7 (70%)\n- **RRF Constant**: 15 (rank-sensitive fusion)\n- **Fetch Strategy**: 2x top_k from each retriever before fusion\n- **Embedding Model**: voyage-3.5-lite (512 dimensions)\n\n### Supported Parameters\n\n| Parameter | Type | Description |\n|-----------|------|-------------|\n| `search_type` | string | Must be `\"hybrid-lc\"` |\n| `top_k` | integer | Number of final results (1-50) |\n| `category_filter` | string | Filter by category |\n| `include_answer` | boolean | Generate AI answer |\n| `answer_model` | string | Model for answers |\n\n### Benefits\n\n- **Best overall performance**: Combines keyword precision with semantic understanding\n- **Handles diverse queries**: Works well for exact matches AND conceptual searches\n- **Optimized weights**: 30% BM25 + 70% Vector tuned for this dataset\n- **Rank-sensitive fusion**: RRF constant c=15 for better ranking quality\n- **LangChain compatible**: Conforms to BaseRetriever interface\n\n### Response\n\nReturns results with `score_type: \"hybrid_rrf\"` and RRF scores from 0.0 to 1.0 (higher = better).\n\n### When to Use\n\n- **Production use**: Recommended for all natural language queries\n- **Multi-faceted queries**: e.g., \"Tokyo restaurants with traditional vibes\"\n- **Unknown query types**: When you're not sure if keyword or semantic is better\n- **Best overall recall**: Achieves ~88% Recall@5 vs ~90% for pure vector"
          },
          "response": []
        },
        {
          "name": "Get Search Configuration",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/search/config",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "search",
                "config"
              ]
            },
            "description": "## Get Search Configuration\n\nGet the runtime search configuration for all search types, including algorithm details, field weighting, and RRF parameters.\n\n### Response\n\n**Status Code:** `200 OK`\n\n```json\n{\n  \"bm25-lc\": {\n    \"algorithm\": \"SQLite FTS5 BM25\",\n    \"implementation\": \"LangChain Wrapper\",\n    \"field_weighting\": {\n      \"summary\": \"3x\",\n      \"headline\": \"2x\",\n      \"extracted_text\": \"2x\",\n      \"category\": \"1.5x\",\n      \"subcategories\": \"1.5x\",\n      \"key_interest\": \"1.5x\",\n      \"themes\": \"1x\",\n      \"objects\": \"1x\",\n      \"location_tags\": \"1x\",\n      \"emotions\": \"0.5x\",\n      \"vibes\": \"0.5x\",\n      \"hashtags\": \"0.5x\"\n    }\n  },\n  \"vector-lc\": {\n    \"algorithm\": \"Cosine similarity\",\n    \"implementation\": \"LangChain Wrapper\",\n    \"embedding_model\": \"voyage-3.5-lite\",\n    \"dimensions\": 512,\n    \"field_weighting\": { ... }\n  },\n  \"hybrid-lc\": {\n    \"algorithm\": \"RRF Ensemble (BM25 + Vector)\",\n    \"implementation\": \"LangChain EnsembleRetriever\",\n    \"rrf_constant_c\": 15,\n    \"weights\": {\n      \"bm25\": 0.3,\n      \"vector\": 0.7\n    },\n    \"fetch_multiplier\": \"2x top_k from each retriever\",\n    \"embedding_model\": \"voyage-3.5-lite\",\n    \"deduplication\": \"by item_id\",\n    \"field_weighting\": \"Inherits from BM25-LC and Vector-LC (see above)\"\n  }\n}\n```\n\n### Use Cases\n\n- Documenting evaluation methodology\n- Understanding search behavior and ranking\n- Debugging retrieval issues\n- Comparing configurations across environments\n- Validating runtime parameters match expectations"
          },
          "response": []
        }
      ],
      "description": "Natural language search and Q&A endpoints supporting BM25-LC keyword search, Vector-LC semantic search, and Hybrid-LC RRF fusion (recommended) - all LangChain-compatible retrievers."
    },
    {
      "name": "Index Management",
      "item": [
        {
          "name": "Rebuild Search Index",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/index/rebuild",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "index",
                "rebuild"
              ]
            },
            "description": "## Rebuild Search Index\n\nRebuild the FTS5 search index from current database. Useful after bulk analysis updates or if search results seem stale.\n\n### Response\n\n**Status Code:** `200 OK`\n\n```json\n{\n  \"status\": \"success\",\n  \"num_documents\": 130,\n  \"build_time_seconds\": 1.23,\n  \"timestamp\": \"2025-12-13T12:00:00.000000\"\n}\n```"
          },
          "response": []
        },
        {
          "name": "Get Index Status",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/index/status",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "index",
                "status"
              ]
            },
            "description": "## Get Index Status\n\nGet current search index status and statistics.\n\n### Response\n\n**Status Code:** `200 OK`\n\n```json\n{\n  \"doc_count\": 130,\n  \"total_items\": 130,\n  \"index_coverage\": 100.0\n}\n```"
          },
          "response": []
        },
        {
          "name": "Rebuild Vector Index",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/vector-index/rebuild",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "vector-index",
                "rebuild"
              ]
            },
            "description": "## Rebuild Vector Index\n\nGenerate embeddings for all analyzed items that don't have embeddings yet. This is used for:\n- Initial backfill after enabling vector search\n- Re-indexing items after analysis updates\n- Recovering from missing embeddings\n\n### Process\n\n1. Finds all analyzed items without embeddings\n2. Creates weighted documents from analysis data\n3. Generates embeddings via VoyageAI API in batches\n4. Stores embeddings in vec_items table\n5. Skips items with empty/sparse analysis data\n\n### Response\n\n**Status Code:** `200 OK`\n\n```json\n{\n  \"status\": \"success\",\n  \"embedded_count\": 84,\n  \"skipped_count\": 3,\n  \"skipped_items\": [\n    {\n      \"item_id\": \"uuid-1\",\n      \"reason\": \"Empty embedding document\"\n    },\n    {\n      \"item_id\": \"uuid-2\",\n      \"reason\": \"Empty embedding document\"\n    }\n  ],\n  \"build_time_seconds\": 12.5\n}\n```\n\n### Response Fields\n\n| Field | Type | Description |\n|-------|------|-------------|\n| `status` | string | \"success\" or \"error\" |\n| `embedded_count` | integer | Number of embeddings generated |\n| `skipped_count` | integer | Number of items skipped |\n| `skipped_items` | array | Details of skipped items |\n| `build_time_seconds` | float | Time taken for the operation |\n\n### Notes\n\n- Items with existing embeddings are not re-embedded\n- Items with sparse analysis data are skipped\n- Uses batch processing to minimize API calls\n- May take several minutes for large collections"
          },
          "response": []
        },
        {
          "name": "Get Vector Index Status",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/vector-index/status",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "vector-index",
                "status"
              ]
            },
            "description": "## Get Vector Index Status\n\nGet current vector search index statistics and coverage.\n\n### Response\n\n**Status Code:** `200 OK`\n\n```json\n{\n  \"total_items\": 87,\n  \"analyzed_items\": 87,\n  \"embedded_items\": 84,\n  \"coverage_percentage\": 96.6,\n  \"embedding_model\": \"voyage-3.5\",\n  \"embedding_dimensions\": 1024\n}\n```\n\n### Response Fields\n\n| Field | Type | Description |\n|-------|------|-------------|\n| `total_items` | integer | Total items in database |\n| `analyzed_items` | integer | Items with analysis |\n| `embedded_items` | integer | Items with embeddings |\n| `coverage_percentage` | float | Percentage of analyzed items with embeddings |\n| `embedding_model` | string | VoyageAI model being used |\n| `embedding_dimensions` | integer | Dimension of embedding vectors |\n\n### Interpreting Coverage\n\n- **100%**: All analyzed items have embeddings - vector search is fully operational\n- **80-99%**: Most items covered - vector search is usable, some items skipped\n- **<80%**: Low coverage - consider running rebuild or re-analyzing items"
          },
          "response": []
        }
      ],
      "description": "Endpoints for managing the BM25 FTS5 search index and vector search index."
    },
    {
      "name": "Golden Dataset",
      "item": [
        {
          "name": "Get Items for Review",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/golden-dataset/items?review_mode=unreviewed&limit=1&offset=0",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "golden-dataset",
                "items"
              ],
              "query": [
                {
                  "key": "review_mode",
                  "value": "unreviewed",
                  "description": "Review mode: 'unreviewed' (default), 'all', or 'reviewed'"
                },
                {
                  "key": "limit",
                  "value": "1",
                  "description": "Number of items to return (max 100)"
                },
                {
                  "key": "offset",
                  "value": "0",
                  "description": "Offset for pagination"
                }
              ]
            },
            "description": "## Get Items for Review\n\nGet items for golden dataset review and curation with filtering by review status.\n\n### Query Parameters\n\n| Parameter | Type | Default | Description |\n|-----------|------|---------|-------------|\n| `review_mode` | string | `\"unreviewed\"` | Filter mode: `\"unreviewed\"` (items without golden data), `\"all\"` (all items), or `\"reviewed\"` (items with golden data only) |\n| `limit` | integer | `1` | Items to return (max 100) |\n| `offset` | integer | `0` | Pagination offset |\n\n### Response\n\n**Status Code:** `200 OK`\n\n```json\n{\n  \"items\": [\n    {\n      \"item_id\": \"uuid-string\",\n      \"original_filename\": \"IMG_7901 Large.jpeg\",\n      \"filename\": \"uuid.jpg\",\n      \"analyses\": [...],\n      \"has_golden\": false\n    }\n  ],\n  \"total\": 87,\n  \"reviewed_count\": 30\n}\n```"
          },
          "response": []
        },
        {
          "name": "Get Golden Entry",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/golden-dataset/entry/{{item_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "golden-dataset",
                "entry",
                "{{item_id}}"
              ]
            },
            "description": "## Get Golden Entry\n\nRetrieve the existing golden dataset entry for a specific item. Used when reviewing items with existing golden records to pre-populate the form.\n\n### Path Parameters\n\n| Parameter | Type | Description |\n|-----------|------|-------------|\n| `item_id` | string | UUID of the item |\n\n### Response\n\n**Status Code:** `200 OK`\n\n```json\n{\n  \"entry\": {\n    \"item_id\": \"uuid-string\",\n    \"original_filename\": \"IMG_7901 Large.jpeg\",\n    \"reviewed_at\": \"2025-12-13T22:36:04.959Z\",\n    \"source_analyses_count\": 4,\n    \"source_analysis_ids\": [\"analysis-1\", \"analysis-2\"],\n    \"category\": \"Travel\",\n    \"subcategories\": [\"Japan\", \"Shopping\"],\n    \"headline\": \"Curated headline\",\n    \"summary\": \"Curated summary\",\n    \"media_metadata\": {...},\n    \"image_details\": {...}\n  }\n}\n```\n\n**Response when no golden entry exists:**\n\n```json\n{\n  \"entry\": null\n}\n```"
          },
          "response": []
        },
        {
          "name": "Compare Analyses",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"field_type\": \"extracted_text\",\n  \"values\": [\n    [\"TOGOSHI GINZA\", \"With over 400 shops\"],\n    [\"Togoshi Ginza\", \"400+ shops\"]\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/golden-dataset/compare",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "golden-dataset",
                "compare"
              ]
            },
            "description": "## Compare Analyses\n\nCalculate similarity between analysis values from different models. Uses Levenshtein distance for extracted_text and TF-IDF cosine similarity for headlines and summaries.\n\n### Request Body\n\n```json\n{\n  \"field_type\": \"extracted_text\",\n  \"values\": [\n    [\"text1\", \"text2\"],\n    [\"text1\", \"text3\"]\n  ]\n}\n```\n\n| Field | Type | Description |\n|-------|------|-------------|\n| `field_type` | string | Type of field: `\"extracted_text\"`, `\"headline\"`, or `\"summary\"` |\n| `values` | array | Array of values to compare |\n\n### Response\n\n**Status Code:** `200 OK`\n\n```json\n{\n  \"method\": \"levenshtein\",\n  \"similarity_matrix\": [[1.0, 0.85], [0.85, 1.0]],\n  \"highest_agreement\": 0.85\n}\n```"
          },
          "response": []
        },
        {
          "name": "Save Golden Entry",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"item_id\": \"{{item_id}}\",\n  \"reviewed_at\": \"2025-12-13T22:36:04.959Z\",\n  \"source_analyses_count\": 4,\n  \"source_analysis_ids\": [\"analysis-1\", \"analysis-2\", \"analysis-3\", \"analysis-4\"],\n  \"category\": \"Travel\",\n  \"subcategories\": [\"Japan\", \"Shopping\"],\n  \"headline\": \"Togoshi Ginza: Tokyo's authentic shopping street\",\n  \"summary\": \"A traditional 1.3km shopping district...\",\n  \"media_metadata\": {\n    \"original_poster\": \"username\",\n    \"tagged_accounts\": [],\n    \"location_tags\": [\"Tokyo\"],\n    \"audio_source\": \"original sound\",\n    \"hashtags\": [\"#japan\"]\n  },\n  \"image_details\": {\n    \"extracted_text\": [\"TOGOSHI GINZA\", \"With over 400 shops\"],\n    \"objects\": [\"street scene\", \"signs\"],\n    \"themes\": [\"local culture\"],\n    \"emotions\": [\"curious\"],\n    \"vibes\": [\"authentic\"],\n    \"visual_hierarchy\": [\"title\", \"description\"],\n    \"key_interest\": \"Local shopping district\",\n    \"likely_source\": \"TikTok\"\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/golden-dataset/save",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "golden-dataset",
                "save"
              ]
            },
            "description": "## Save Golden Entry\n\nSave or update a golden dataset entry with curated analysis values. The `original_filename` field is automatically populated from the database.\n\n### Request Body\n\n```json\n{\n  \"item_id\": \"uuid-string\",\n  \"reviewed_at\": \"2025-12-13T22:36:04.959Z\",\n  \"source_analyses_count\": 4,\n  \"source_analysis_ids\": [\"analysis-1\", \"analysis-2\"],\n  \"category\": \"Travel\",\n  \"subcategories\": [\"Japan\", \"Shopping\"],\n  \"headline\": \"Curated headline\",\n  \"summary\": \"Curated summary\",\n  \"media_metadata\": {\n    \"original_poster\": \"username\",\n    \"tagged_accounts\": [],\n    \"location_tags\": [\"Tokyo\"],\n    \"audio_source\": \"original sound\",\n    \"hashtags\": [\"#japan\"]\n  },\n  \"image_details\": {\n    \"extracted_text\": [\"Text 1\", \"Text 2\"],\n    \"objects\": [\"object1\"],\n    \"themes\": [\"theme1\"],\n    \"emotions\": [\"emotion1\"],\n    \"vibes\": [\"vibe1\"],\n    \"visual_hierarchy\": [\"element1\"],\n    \"key_interest\": \"Key point\",\n    \"likely_source\": \"TikTok\"\n  }\n}\n```\n\n**Note**: The `original_filename` field is automatically added by the backend from the database and does not need to be included in the request.\n\n### Response\n\n**Status Code:** `200 OK`\n\n```json\n{\n  \"status\": \"success\",\n  \"item_id\": \"uuid-string\",\n  \"total_golden_count\": 30\n}\n```"
          },
          "response": []
        },
        {
          "name": "Get Golden Status",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/golden-dataset/status",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "golden-dataset",
                "status"
              ]
            },
            "description": "## Get Golden Status\n\nGet golden dataset progress statistics.\n\n### Response\n\n**Status Code:** `200 OK`\n\n```json\n{\n  \"total_items\": 87,\n  \"reviewed_items\": 30,\n  \"progress_percentage\": 34.5\n}\n```"
          },
          "response": []
        },
        {
          "name": "Keepalive",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/keepalive",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "keepalive"
              ]
            },
            "description": "## Keepalive\n\nSession keepalive endpoint to prevent GitHub Codespace timeout during active use of the golden dataset tool. The frontend automatically sends keepalive pings based on user activity.\n\n### Response\n\n**Status Code:** `200 OK`\n\n```json\n{\n  \"status\": \"alive\",\n  \"timestamp\": 1702473600.123\n}\n```\n\n### Response Fields\n\n| Field | Type | Description |\n|-------|------|-------------|\n| `status` | string | Always \"alive\" |\n| `timestamp` | float | Unix timestamp |\n\n### Usage\n\nThis endpoint is primarily used by the golden dataset web tool to maintain the Codespace session active. It writes a timestamp to a `.keepalive` file which signals activity to the Codespace environment."
          },
          "response": []
        }
      ],
      "description": "Endpoints for creating and managing the golden dataset for evaluation."
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8000"
    },
    {
      "key": "golden_base_url",
      "value": "http://golden.localhost:8000"
    }
  ]
}
