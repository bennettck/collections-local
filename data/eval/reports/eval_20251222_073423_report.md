# Retrieval Evaluation Report (Multi-Search Comparison)

**Run ID**: eval_20251222_073423
**Timestamp**: 2025-12-22T07:34:24.008785+00:00
**API Endpoint**: http://localhost:8000
**Dataset**: retrieval_evaluation_dataset.json (50 queries)
**Search Types**: bm25, vector, bm25-lc, vector-lc, hybrid-lc
**Parallel Execution**: Yes
**Target Items**: 55 | **Actual Items**: 55 ✓

---

## Search Configuration

Runtime configuration captured at evaluation time:

### bm25

| Parameter | Value |
|-----------|-------|
| **Algorithm** | SQLite FTS5 BM25 |
| **Implementation** | Native |
| **Field Weighting** | |
| &nbsp;&nbsp;&nbsp;• summary | 3x |
| &nbsp;&nbsp;&nbsp;• headline | 2x |
| &nbsp;&nbsp;&nbsp;• extracted_text | 2x |
| &nbsp;&nbsp;&nbsp;• category | 1.5x |
| &nbsp;&nbsp;&nbsp;• subcategories | 1.5x |
| &nbsp;&nbsp;&nbsp;• key_interest | 1.5x |
| &nbsp;&nbsp;&nbsp;• themes | 1x |
| &nbsp;&nbsp;&nbsp;• objects | 1x |
| &nbsp;&nbsp;&nbsp;• location_tags | 1x |
| &nbsp;&nbsp;&nbsp;• emotions | 0.5x |
| &nbsp;&nbsp;&nbsp;• vibes | 0.5x |
| &nbsp;&nbsp;&nbsp;• hashtags | 0.5x |


### vector

| Parameter | Value |
|-----------|-------|
| **Algorithm** | Cosine similarity |
| **Implementation** | Native sqlite-vec |
| **Embedding Model** | voyage-3.5-lite |
| **Field Weighting** | |
| &nbsp;&nbsp;&nbsp;• summary | 3x |
| &nbsp;&nbsp;&nbsp;• headline | 2x |
| &nbsp;&nbsp;&nbsp;• extracted_text | 2x |
| &nbsp;&nbsp;&nbsp;• category | 1.5x |
| &nbsp;&nbsp;&nbsp;• subcategories | 1.5x |
| &nbsp;&nbsp;&nbsp;• key_interest | 1.5x |
| &nbsp;&nbsp;&nbsp;• themes | 1x |
| &nbsp;&nbsp;&nbsp;• objects | 1x |
| &nbsp;&nbsp;&nbsp;• location_tags | 1x |
| &nbsp;&nbsp;&nbsp;• emotions | 0.5x |
| &nbsp;&nbsp;&nbsp;• vibes | 0.5x |
| &nbsp;&nbsp;&nbsp;• hashtags | 0.5x |


### bm25-lc

| Parameter | Value |
|-----------|-------|
| **Algorithm** | SQLite FTS5 BM25 |
| **Implementation** | LangChain wrapper |
| **Field Weighting** | |
| &nbsp;&nbsp;&nbsp;• summary | 3x |
| &nbsp;&nbsp;&nbsp;• headline | 2x |
| &nbsp;&nbsp;&nbsp;• extracted_text | 2x |
| &nbsp;&nbsp;&nbsp;• category | 1.5x |
| &nbsp;&nbsp;&nbsp;• subcategories | 1.5x |
| &nbsp;&nbsp;&nbsp;• key_interest | 1.5x |
| &nbsp;&nbsp;&nbsp;• themes | 1x |
| &nbsp;&nbsp;&nbsp;• objects | 1x |
| &nbsp;&nbsp;&nbsp;• location_tags | 1x |
| &nbsp;&nbsp;&nbsp;• emotions | 0.5x |
| &nbsp;&nbsp;&nbsp;• vibes | 0.5x |
| &nbsp;&nbsp;&nbsp;• hashtags | 0.5x |


### vector-lc

| Parameter | Value |
|-----------|-------|
| **Algorithm** | Cosine similarity |
| **Implementation** | LangChain wrapper |
| **Embedding Model** | voyage-3.5-lite |
| **Field Weighting** | |
| &nbsp;&nbsp;&nbsp;• summary | 3x |
| &nbsp;&nbsp;&nbsp;• headline | 2x |
| &nbsp;&nbsp;&nbsp;• extracted_text | 2x |
| &nbsp;&nbsp;&nbsp;• category | 1.5x |
| &nbsp;&nbsp;&nbsp;• subcategories | 1.5x |
| &nbsp;&nbsp;&nbsp;• key_interest | 1.5x |
| &nbsp;&nbsp;&nbsp;• themes | 1x |
| &nbsp;&nbsp;&nbsp;• objects | 1x |
| &nbsp;&nbsp;&nbsp;• location_tags | 1x |
| &nbsp;&nbsp;&nbsp;• emotions | 0.5x |
| &nbsp;&nbsp;&nbsp;• vibes | 0.5x |
| &nbsp;&nbsp;&nbsp;• hashtags | 0.5x |


### hybrid-lc

| Parameter | Value |
|-----------|-------|
| **Algorithm** | RRF Ensemble (BM25 + Vector) |
| **Implementation** | LangChain EnsembleRetriever |
| **Embedding Model** | voyage-3.5-lite |
| **RRF Constant (c)** | 15 |
| **Weights** | bm25=0.3, vector=0.7 |
| **Fetch Strategy** | 2x top_k from each retriever |
| **Deduplication** | by item_id |
| **Field Weighting** | Inherits from BM25 and Vector (see above) |


---

## Performance Comparison

| Search Type | Avg Time (ms) | Min (ms) | Max (ms) |
|-------------|---------------|----------|----------|
| **bm25** | 1.7 | 0.6 | 6.8 |
| **vector** | 93.2 | 80.1 | 363.3 |
| **bm25-lc** | 18.5 | 2.2 | 288.7 |
| **vector-lc** | 104.9 | 91.4 | 298.7 |
| **hybrid-lc** | 132.0 | 108.7 | 271.6 |

---

## Summary Metrics Comparison

### Precision

| Metric | **bm25** | **vector** | **bm25-lc** | **vector-lc** | **hybrid-lc** | Δ (abs) | Δ (%) | Winner |
|--------|------|------|------|------|------|---------|-------|--------|
| **@1** | 0.881 | 0.976 | 0.881 | 0.976 | 0.905 | - | - | - |
| **@3** | 0.508 | 0.595 | 0.508 | 0.595 | 0.603 | - | - | - |
| **@5** | 0.376 | 0.414 | 0.376 | 0.414 | 0.400 | - | - | - |
| **@10** | 0.207 | 0.226 | 0.207 | 0.226 | 0.226 | - | - | - |


### Recall

| Metric | **bm25** | **vector** | **bm25-lc** | **vector-lc** | **hybrid-lc** | Δ (abs) | Δ (%) | Winner |
|--------|------|------|------|------|------|---------|-------|--------|
| **@1** | 0.546 | 0.578 | 0.546 | 0.578 | 0.551 | - | - | - |
| **@3** | 0.749 | 0.833 | 0.749 | 0.833 | 0.834 | - | - | - |
| **@5** | 0.846 | 0.901 | 0.846 | 0.901 | 0.880 | - | - | - |
| **@10** | 0.885 | 0.942 | 0.885 | 0.942 | 0.942 | - | - | - |


### NDCG

| Metric | **bm25** | **vector** | **bm25-lc** | **vector-lc** | **hybrid-lc** | Δ (abs) | Δ (%) | Winner |
|--------|------|------|------|------|------|---------|-------|--------|
| **@1** | 0.865 | 0.976 | 0.865 | 0.976 | 0.905 | - | - | - |
| **@3** | 0.799 | 0.900 | 0.799 | 0.900 | 0.903 | - | - | - |
| **@5** | 0.836 | 0.910 | 0.836 | 0.910 | 0.892 | - | - | - |
| **@10** | 0.859 | 0.934 | 0.859 | 0.934 | 0.927 | - | - | - |


### Mean Reciprocal Rank (MRR)

| Search Type | MRR | Δ vs first | Winner |
|-------------|-----|------------|--------|
| **bm25** | 0.902 | - |  |
| **vector** | 0.979 | - |  |
| **bm25-lc** | 0.902 | - |  |
| **vector-lc** | 0.979 | - |  |
| **hybrid-lc** | 0.937 | - |  |

---

## By Query Type Comparison

### multi-item-recall

| Metric | **bm25** | **vector** | **bm25-lc** | **vector-lc** | **hybrid-lc** | Winner |
|--------|------|------|------|------|------|--------|
| P@5 | 0.59 | 0.63 | 0.59 | 0.63 | 0.61 | VECTOR |
| R@5 | 0.86 | 0.91 | 0.86 | 0.91 | 0.89 | VECTOR |
| MRR | 0.90 | 1.00 | 0.90 | 1.00 | 0.97 | VECTOR |


### semantic

| Metric | **bm25** | **vector** | **bm25-lc** | **vector-lc** | **hybrid-lc** | Winner |
|--------|------|------|------|------|------|--------|
| P@5 | 0.33 | 0.42 | 0.33 | 0.42 | 0.38 | VECTOR |
| R@5 | 0.64 | 0.76 | 0.64 | 0.76 | 0.72 | VECTOR |
| MRR | 0.78 | 0.93 | 0.78 | 0.93 | 0.82 | VECTOR |


### single-item-precision

| Metric | **bm25** | **vector** | **bm25-lc** | **vector-lc** | **hybrid-lc** | Winner |
|--------|------|------|------|------|------|--------|
| P@5 | 0.20 | 0.20 | 0.20 | 0.20 | 0.20 | BM25 |
| R@5 | 1.00 | 1.00 | 1.00 | 1.00 | 1.00 | BM25 |
| MRR | 1.00 | 1.00 | 1.00 | 1.00 | 1.00 | BM25 |

