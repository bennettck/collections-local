# Retrieval Evaluation Report (Multi-Search Comparison)

**Run ID**: eval_20251221_071351
**Timestamp**: 2025-12-21T07:13:51.198109+00:00
**API Endpoint**: http://localhost:8000
**Dataset**: retrieval_evaluation_dataset.json (50 queries)
**Search Types**: bm25, vector
**Parallel Execution**: Yes
**Target Items**: 55 | **Actual Items**: 55 ✓

---

## Performance Comparison

| Search Type | Avg Time (ms) | Min (ms) | Max (ms) |
|-------------|---------------|----------|----------|
| **bm25** | 1.8 | 0.7 | 6.3 |
| **vector** | 99.9 | 83.3 | 316.9 |

---

## Summary Metrics Comparison

### Precision

| Metric | **bm25** | **vector** | Δ (abs) | Δ (%) | Winner |
|--------|------|------|---------|-------|--------|
| **@1** | 0.881 | 0.976 | +0.095 | +10.8% | VECTOR |
| **@3** | 0.508 | 0.595 | +0.087 | +17.2% | VECTOR |
| **@5** | 0.376 | 0.414 | +0.038 | +10.1% | VECTOR |
| **@10** | 0.207 | 0.226 | +0.019 | +9.2% | VECTOR |


### Recall

| Metric | **bm25** | **vector** | Δ (abs) | Δ (%) | Winner |
|--------|------|------|---------|-------|--------|
| **@1** | 0.546 | 0.578 | +0.033 | +6.0% | VECTOR |
| **@3** | 0.749 | 0.833 | +0.084 | +11.3% | VECTOR |
| **@5** | 0.846 | 0.901 | +0.055 | +6.4% | VECTOR |
| **@10** | 0.885 | 0.942 | +0.056 | +6.4% | VECTOR |


### NDCG

| Metric | **bm25** | **vector** | Δ (abs) | Δ (%) | Winner |
|--------|------|------|---------|-------|--------|
| **@1** | 0.865 | 0.976 | +0.111 | +12.8% | VECTOR |
| **@3** | 0.799 | 0.900 | +0.101 | +12.6% | VECTOR |
| **@5** | 0.836 | 0.910 | +0.074 | +8.9% | VECTOR |
| **@10** | 0.859 | 0.934 | +0.075 | +8.7% | VECTOR |


### Mean Reciprocal Rank (MRR)

| Search Type | MRR | Δ vs first | Winner |
|-------------|-----|------------|--------|
| **bm25** | 0.902 | - |  |
| **vector** | 0.979 | +0.078 | VECTOR |

---

## Agreement Analysis

### Rank-1 Agreement
- **61.9%** of queries return the same top result
- Based on 42 comparable queries

### Top-K Overlap (Jaccard Similarity)
- **Top-3 Average**: 0.50 (50% overlap in top 3 results)
- **Top-5 Average**: 0.43 (43% overlap in top 5 results)

---

## Per-Query Search Type Comparison

### Agreement Summary
- Queries with same rank-1: 26/42 (61.9%)
- Queries where vector won: 5/42 (11.9%)
- Queries where bm25 won: 0/42 (0.0%)
- Ties: 37/42 (88.1%)

### Queries Where Vector Significantly Outperformed (MRR Δ > 0.2)

| Query ID | Type | BM25 Rank | VECTOR Rank | Δ MRR | Query Text |
|----------|------|----------|----------|-------|------------|
| q018 | multi-item-recall | 3 | 1 | +0.67 | hidden gem restaurants Japan |
| q027 | multi-item-recall | 5 | 1 | +0.80 | luxury travel experiences Japan |
| q032 | semantic | 3 | 1 | +0.67 | cool things to do at night in Seoul |
| q041 | semantic | - | 1 | +1.00 | unique souvenirs to bring home from Japa... |


---

## By Query Type Comparison

### multi-item-recall

| Metric | **bm25** | **vector** | Winner |
|--------|------|------|--------|
| P@5 | 0.59 | 0.63 | VECTOR |
| R@5 | 0.86 | 0.91 | VECTOR |
| MRR | 0.90 | 1.00 | VECTOR |


### semantic

| Metric | **bm25** | **vector** | Winner |
|--------|------|------|--------|
| P@5 | 0.33 | 0.42 | VECTOR |
| R@5 | 0.64 | 0.76 | VECTOR |
| MRR | 0.78 | 0.93 | VECTOR |


### single-item-precision

| Metric | **bm25** | **vector** | Winner |
|--------|------|------|--------|
| P@5 | 0.20 | 0.20 | BM25 |
| R@5 | 1.00 | 1.00 | BM25 |
| MRR | 1.00 | 1.00 | BM25 |

